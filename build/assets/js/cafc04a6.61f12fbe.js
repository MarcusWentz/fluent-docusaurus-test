"use strict";(self.webpackChunkshardeum_docs=self.webpackChunkshardeum_docs||[]).push([[3075],{7030:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>d,contentTitle:()=>c,default:()=>p,frontMatter:()=>i,metadata:()=>r,toc:()=>u});const r=JSON.parse('{"id":"smartContracts/deploy/hardhat","title":"Hardhat","description":"Hardhat is a development environment to compile, deploy, test, and debug your Ethereum software. It helps developers manage and automate the recurring tasks inherent to the process of building smart contracts and dApps and easily introduces more functionality around this workflow. This means compiling, running and testing smart contracts at the very core.","source":"@site/docs/smartContracts/deploy/hardhat.md","sourceDirName":"smartContracts/deploy","slug":"/smartContracts/deploy/hardhat","permalink":"/docusaurus-template/smartContracts/deploy/hardhat","draft":false,"unlisted":false,"editUrl":"https://github.com/Shardeum/shardeum-docs/tree/master/docs/smartContracts/deploy/hardhat.md","tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"title":"Hardhat","sidebar_position":3},"sidebar":"tutorialSidebar","previous":{"title":"Foundry","permalink":"/docusaurus-template/smartContracts/deploy/foundry"},"next":{"title":"Truffle","permalink":"/docusaurus-template/smartContracts/deploy/truffle"}}');var a=t(4848),s=t(8453),o=t(1470),l=t(9365);const i={title:"Hardhat",sidebar_position:3},c=void 0,d={},u=[{value:"Environment Setup",id:"environment-setup",level:2},{value:"Installing Hardhat",id:"installing-hardhat",level:2},{value:"Creating a Hardhat Project",id:"creating-a-hardhat-project",level:2},{value:"Create Contract",id:"create-contract",level:2},{value:"Configuring Hardhat For Shardeum Liberty",id:"configuring-hardhat-for-shardeum-liberty",level:2},{value:"Compile Contract",id:"compile-contract",level:2},{value:"Coding Deployment Scripts",id:"coding-deployment-scripts",level:2},{value:"Deploying on Shardeum Liberty",id:"deploying-on-shardeum-liberty",level:2}];function h(e){const n={a:"a",admonition:"admonition",code:"code",h2:"h2",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.p,{children:"Hardhat is a development environment to compile, deploy, test, and debug your Ethereum software. It helps developers manage and automate the recurring tasks inherent to the process of building smart contracts and dApps and easily introduces more functionality around this workflow. This means compiling, running and testing smart contracts at the very core."}),"\n",(0,a.jsx)(n.h2,{id:"environment-setup",children:"Environment Setup"}),"\n",(0,a.jsx)(n.p,{children:"There are a few technical requirements for developers to start using Hardhat. Install the following dependencies:"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["NodeJS v12 or later (",(0,a.jsx)(n.a,{href:"https://nodejs.org/en/",children:"available here"}),")"]}),"\n",(0,a.jsx)(n.li,{children:"Npm/Yarn Package Installer (included with Node)"}),"\n",(0,a.jsx)(n.li,{children:"Windows, Linux or Mac OS X"}),"\n"]}),"\n",(0,a.jsx)(n.h2,{id:"installing-hardhat",children:"Installing Hardhat"}),"\n",(0,a.jsx)(n.admonition,{title:"Hardhat Version",type:"caution",children:(0,a.jsx)(n.p,{children:"Hardhat Version 2.9.1 or higher is recommended with Shardeum to avoid gas errors for testing and deployment."})}),"\n",(0,a.jsx)(n.p,{children:"Once the above dependencies are installed successfully, you need to setup a fresh new empty project by using the below commands."}),"\n",(0,a.jsx)(o.A,{children:(0,a.jsx)(l.A,{value:"shell",label:"Shell",default:!0,children:(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-shell",children:"mkdir testToken\ncd testToken\nnpm init --yes\nnpm install --save-dev hardhat\n"})})})}),"\n",(0,a.jsx)(n.admonition,{title:"Tip",type:"tip",children:(0,a.jsx)(n.p,{children:"Installing Hardhat will install some Ethereum JavaScript dependencies, so be patient."})}),"\n",(0,a.jsx)(n.p,{children:"This tutorial will use the Ethers.js and Waffle plugins. They'll allow interaction with Shardeum to test contracts."}),"\n",(0,a.jsx)(o.A,{children:(0,a.jsx)(l.A,{value:"shell",label:"Shell",default:!0,children:(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-shell",children:"npm install --save-dev @nomiclabs/hardhat-waffle ethereum-waffle chai @nomiclabs/hardhat-ethers ethers\n"})})})}),"\n",(0,a.jsx)(n.h2,{id:"creating-a-hardhat-project",children:"Creating a Hardhat Project"}),"\n",(0,a.jsx)(n.p,{children:"In the same directory where you installed Hardhat run:"}),"\n",(0,a.jsx)(o.A,{children:(0,a.jsx)(l.A,{value:"shell",label:"Shell",default:!0,children:(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-shell",children:"npx hardhat\n"})})})}),"\n",(0,a.jsx)(n.p,{children:'In the terminal output, select "Create a basic sample project":'}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{children:'888    888                      888 888               888\n888    888                      888 888               888\n888    888                      888 888               888\n8888888888  8888b.  888d888 .d88888 88888b.   8888b.  888888\n888    888     "88b 888P"  d88" 888 888 "88b     "88b 888\n888    888 .d888888 888    888  888 888  888 .d888888 888\n888    888 888  888 888    Y88b 888 888  888 888  888 Y88b.\n888    888 "Y888888 888     "Y88888 888  888 "Y888888  "Y888\n\n\ud83d\udc77 Welcome to Hardhat v2.9.3 \ud83d\udc77\u200d\n\n? What do you want to do? \u2026\n\u276f Create a basic sample project\n  Create an advanced sample project\n  Create an advanced sample project that uses TypeScript\n  Create an empty hardhat.config.js\n  Quit\n'})}),"\n",(0,a.jsx)(n.p,{children:"Once this operation is complete, you'll now have a project structure with the following items:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{children:"1. contracts/: Directory for Solidity contracts\n2. scripts/: Directory for scriptable deployment files\n3. test/: Directory for test files for testing your application and contracts\n4. hardhat-config.js:Hardhat configuration file\n5. artifacts(visible after compile): Compiled Solidity contracts with bytecode and ABI\n"})}),"\n",(0,a.jsx)(n.h2,{id:"create-contract",children:"Create Contract"}),"\n",(0,a.jsx)(n.p,{children:"You can write your own smart contract, or use open-source openzeppellin standard contracts and buidl on top of them."}),"\n",(0,a.jsx)(n.p,{children:"We are using openzeppelin for our testToken, which requires a dependency."}),"\n",(0,a.jsx)(o.A,{children:(0,a.jsx)(l.A,{value:"shell",label:"Shell",default:!0,children:(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-shell",children:"npm install @openzeppelin/contracts\n"})})})}),"\n",(0,a.jsx)(n.p,{children:'Create a file named "testToken.sol" in the contract directory.'}),"\n",(0,a.jsx)(o.A,{children:(0,a.jsx)(l.A,{value:"solidity",label:"Solidity",default:!0,children:(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-solidity",children:'// SPDX-License-Identifier: MIT\npragma solidity ^0.8.0;\n\nimport "@openzeppelin/contracts/token/ERC20/ERC20.sol";\n\ncontract testToken is ERC20 {\n\n  constructor(uint256 initialSupply) ERC20("shardeumTestToken", "STT") {\n      _mint(msg.sender, initialSupply);\n  }\n\n}\n'})})})}),"\n",(0,a.jsx)(n.h2,{id:"configuring-hardhat-for-shardeum-liberty",children:"Configuring Hardhat For Shardeum Liberty"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"Go to hardhat-config.js (located in root directory)"}),"\n",(0,a.jsxs)(n.li,{children:["Update with Shardeum Liberty details (",(0,a.jsx)(n.a,{href:"/network/endpoints",children:"available here"}),")"]}),"\n"]}),"\n",(0,a.jsx)(o.A,{children:(0,a.jsx)(l.A,{value:"javascript",label:"Javascript",default:!0,children:(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-js",children:'require("@nomiclabs/hardhat-waffle");\nrequire(\'@nomiclabs/hardhat-ethers\');\nconst { privateKeys } = require(\'./secrets.json\');\n\n// This is a sample Hardhat task. To learn how to create your own go to\n// https://hardhat.org/guides/create-task.html\ntask("accounts", "Prints the list of accounts", async () => {\n const accounts = await ethers.getSigners();\n\n for (const account of accounts) {\n   console.log(account.address);\n }\n});\n\n// You need to export an object to set up your config\n// Go to https://hardhat.org/config/ to learn more\n\n/**\n* @type import(\'hardhat/config\').HardhatUserConfig\n*/\nmodule.exports = {\n defaultNetwork: "liberty",\n networks: {\n   hardhat: {\n   },\n   liberty: {\n     url: "https://liberty20.shardeum.org/",\n     chainId: 8081,\n     accounts:[privateKeys]\n   },\n },\n solidity: {\n//configure solidity version for compilation\n version: "0.8.0",\n settings: {\n   optimizer: {\n     enabled: true\n   }\n  }\n },\n paths: {\n   sources: "./contracts",\n   tests: "./test",\n   cache: "./cache",\n   artifacts: "./artifacts"\n },\n mocha: {\n   timeout: 20000\n }\n};\n'})})})}),"\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.strong,{children:"Note:"}),' Make sure to add your mnemonic or private key and add it to a separate file named "secrets.json" (make sure never to upload this file to GitHub or GitLab).']}),"\n",(0,a.jsx)(n.h2,{id:"compile-contract",children:"Compile Contract"}),"\n",(0,a.jsx)(n.p,{children:"To compile a Hardhat project, change to the root directory (in our case testToken directory) and run the command in the terminal."}),"\n",(0,a.jsx)(o.A,{children:(0,a.jsx)(l.A,{value:"shell",label:"Shell",default:!0,children:(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-shell",children:"npx hardhat compile\n"})})})}),"\n",(0,a.jsx)(n.h2,{id:"coding-deployment-scripts",children:"Coding Deployment Scripts"}),"\n",(0,a.jsx)(n.p,{children:'Create a file in scripts folder named "deploy.js".'}),"\n",(0,a.jsx)(o.A,{children:(0,a.jsx)(l.A,{value:"javascript",label:"Javascript",default:!0,children:(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-js",children:'// Runtime Environment\'s members available in the global scope.\nconst hre = require("hardhat");\n\nasync function main() {\n // Hardhat always runs the compile task when running scripts with its command\n // line interface.\n //\n // If this script is run directly using `node` you may want to call compile\n // manually to make sure everything is compiled\n // await hre.run(\'compile\');\n\n // We get the contract to deploy\n const TestToken = await hre.ethers.getContractFactory("testToken");\n const testToken = await TestToken.deploy("100000000000000000000");\n\n await testToken.deployed();\n console.log("testToken deployed to:", testToken.address);\n}\n\n// We recommend this pattern to be able to use async/await everywhere\n// and properly handle errors.\nmain()\n .then(() => process.exit(0))\n .catch((error) => {\n   console.error(error);\n   process.exit(1);\n });\n'})})})}),"\n",(0,a.jsx)(n.h2,{id:"deploying-on-shardeum-liberty",children:"Deploying on Shardeum Liberty"}),"\n",(0,a.jsx)(n.p,{children:"To deploy the testToken contract run this command in testToken directory."}),"\n",(0,a.jsx)(o.A,{children:(0,a.jsx)(l.A,{value:"shell",label:"Shell",default:!0,children:(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-shell",children:"npx hardhat run --network liberty scripts/deploy.js\n"})})})}),"\n",(0,a.jsx)(n.p,{children:"The contract will be deployed on Shardeum Liberty."}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{children:"testToken deployed to: 0x2f4cBD1a614E1F3760b06Dad3868994591e140d3\n"})}),"\n",(0,a.jsx)(n.p,{children:"Congratulations! You have successfully deployed ERC20 Smart Contract. Now you can interact with the Smart Contract by building a dApp."})]})}function p(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(h,{...e})}):h(e)}},9365:(e,n,t)=>{t.d(n,{A:()=>o});t(6540);var r=t(8215);const a={tabItem:"tabItem_Ymn6"};var s=t(4848);function o(e){let{children:n,hidden:t,className:o}=e;return(0,s.jsx)("div",{role:"tabpanel",className:(0,r.A)(a.tabItem,o),hidden:t,children:n})}},1470:(e,n,t)=>{t.d(n,{A:()=>w});var r=t(6540),a=t(8215),s=t(3104),o=t(6347),l=t(205),i=t(7485),c=t(1682),d=t(679);function u(e){return r.Children.toArray(e).filter((e=>"\n"!==e)).map((e=>{if(!e||(0,r.isValidElement)(e)&&function(e){const{props:n}=e;return!!n&&"object"==typeof n&&"value"in n}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}function h(e){const{values:n,children:t}=e;return(0,r.useMemo)((()=>{const e=n??function(e){return u(e).map((e=>{let{props:{value:n,label:t,attributes:r,default:a}}=e;return{value:n,label:t,attributes:r,default:a}}))}(t);return function(e){const n=(0,c.XI)(e,((e,n)=>e.value===n.value));if(n.length>0)throw new Error(`Docusaurus error: Duplicate values "${n.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[n,t])}function p(e){let{value:n,tabValues:t}=e;return t.some((e=>e.value===n))}function m(e){let{queryString:n=!1,groupId:t}=e;const a=(0,o.W6)(),s=function(e){let{queryString:n=!1,groupId:t}=e;if("string"==typeof n)return n;if(!1===n)return null;if(!0===n&&!t)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return t??null}({queryString:n,groupId:t});return[(0,i.aZ)(s),(0,r.useCallback)((e=>{if(!s)return;const n=new URLSearchParams(a.location.search);n.set(s,e),a.replace({...a.location,search:n.toString()})}),[s,a])]}function f(e){const{defaultValue:n,queryString:t=!1,groupId:a}=e,s=h(e),[o,i]=(0,r.useState)((()=>function(e){let{defaultValue:n,tabValues:t}=e;if(0===t.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(n){if(!p({value:n,tabValues:t}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${n}" but none of its children has the corresponding value. Available values are: ${t.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return n}const r=t.find((e=>e.default))??t[0];if(!r)throw new Error("Unexpected error: 0 tabValues");return r.value}({defaultValue:n,tabValues:s}))),[c,u]=m({queryString:t,groupId:a}),[f,y]=function(e){let{groupId:n}=e;const t=function(e){return e?`docusaurus.tab.${e}`:null}(n),[a,s]=(0,d.Dv)(t);return[a,(0,r.useCallback)((e=>{t&&s.set(e)}),[t,s])]}({groupId:a}),g=(()=>{const e=c??f;return p({value:e,tabValues:s})?e:null})();(0,l.A)((()=>{g&&i(g)}),[g]);return{selectedValue:o,selectValue:(0,r.useCallback)((e=>{if(!p({value:e,tabValues:s}))throw new Error(`Can't select invalid tab value=${e}`);i(e),u(e),y(e)}),[u,y,s]),tabValues:s}}var y=t(2303);const g={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var b=t(4848);function j(e){let{className:n,block:t,selectedValue:r,selectValue:o,tabValues:l}=e;const i=[],{blockElementScrollPositionUntilNextRender:c}=(0,s.a_)(),d=e=>{const n=e.currentTarget,t=i.indexOf(n),a=l[t].value;a!==r&&(c(n),o(a))},u=e=>{let n=null;switch(e.key){case"Enter":d(e);break;case"ArrowRight":{const t=i.indexOf(e.currentTarget)+1;n=i[t]??i[0];break}case"ArrowLeft":{const t=i.indexOf(e.currentTarget)-1;n=i[t]??i[i.length-1];break}}n?.focus()};return(0,b.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,a.A)("tabs",{"tabs--block":t},n),children:l.map((e=>{let{value:n,label:t,attributes:s}=e;return(0,b.jsx)("li",{role:"tab",tabIndex:r===n?0:-1,"aria-selected":r===n,ref:e=>i.push(e),onKeyDown:u,onClick:d,...s,className:(0,a.A)("tabs__item",g.tabItem,s?.className,{"tabs__item--active":r===n}),children:t??n},n)}))})}function v(e){let{lazy:n,children:t,selectedValue:s}=e;const o=(Array.isArray(t)?t:[t]).filter(Boolean);if(n){const e=o.find((e=>e.props.value===s));return e?(0,r.cloneElement)(e,{className:(0,a.A)("margin-top--md",e.props.className)}):null}return(0,b.jsx)("div",{className:"margin-top--md",children:o.map(((e,n)=>(0,r.cloneElement)(e,{key:n,hidden:e.props.value!==s})))})}function x(e){const n=f(e);return(0,b.jsxs)("div",{className:(0,a.A)("tabs-container",g.tabList),children:[(0,b.jsx)(j,{...n,...e}),(0,b.jsx)(v,{...n,...e})]})}function w(e){const n=(0,y.A)();return(0,b.jsx)(x,{...e,children:u(e.children)},String(n))}},8453:(e,n,t)=>{t.d(n,{R:()=>o,x:()=>l});var r=t(6540);const a={},s=r.createContext(a);function o(e){const n=r.useContext(s);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:o(e.components),r.createElement(s.Provider,{value:n},e.children)}}}]);