"use strict";(self.webpackChunkshardeum_docs=self.webpackChunkshardeum_docs||[]).push([[2903],{4744:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>d,contentTitle:()=>o,default:()=>h,frontMatter:()=>c,metadata:()=>a,toc:()=>u});const a=JSON.parse('{"id":"smartContracts/EIP-2930/solidityInterfaces","title":"Solidity Interfaces","description":"Multicall Contracts","source":"@site/docs/smartContracts/EIP-2930/solidityInterfaces.md","sourceDirName":"smartContracts/EIP-2930","slug":"/smartContracts/EIP-2930/solidityInterfaces","permalink":"/docusaurus-template/smartContracts/EIP-2930/solidityInterfaces","draft":false,"unlisted":false,"editUrl":"https://github.com/Shardeum/shardeum-docs/tree/master/docs/smartContracts/EIP-2930/solidityInterfaces.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"title":"Solidity Interfaces","sidebar_position":2},"sidebar":"tutorialSidebar","previous":{"title":"Multicall Contract","permalink":"/docusaurus-template/smartContracts/EIP-2930/multicallContract"},"next":{"title":"Polling Cycles","permalink":"/docusaurus-template/smartContracts/events/pollEvents"}}');var r=t(4848),i=t(8453),s=t(1470),l=t(9365);const c={title:"Solidity Interfaces",sidebar_position:2},o=void 0,d={},u=[{value:"Multicall Contracts",id:"multicall-contracts",level:2},{value:"What are Solidity interfaces?",id:"what-are-solidity-interfaces",level:2},{value:"Why are Solidity interfaces useful?",id:"why-are-solidity-interfaces-useful",level:2},{value:"How do I define a Solidity interface?",id:"how-do-i-define-a-solidity-interface",level:2},{value:"Where are Solidity interface functions defined?",id:"where-are-solidity-interface-functions-defined",level:2},{value:"When should I use a Solidity interface?",id:"when-should-i-use-a-solidity-interface",level:2},{value:"WSHM Solidity 0.4.0",id:"wshm-solidity-040",level:2},{value:"WSHM interface Solidity 0.8.0 With Multicall Contract",id:"wshm-interface-solidity-080-with-multicall-contract",level:2}];function f(e){const n={admonition:"admonition",br:"br",code:"code",h2:"h2",p:"p",pre:"pre",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.h2,{id:"multicall-contracts",children:"Multicall Contracts"}),"\n",(0,r.jsxs)(n.admonition,{title:"Automated Access List",type:"tip",children:[(0,r.jsx)(n.p,{children:"Sphinx 1.X and Liberty 2.X have automated the accessList for Shardeum RPC nodes to route shards."}),(0,r.jsx)(n.p,{children:"Therefore, you no longer need to specify the accessList for these networks with automated accessList generation."}),(0,r.jsx)(n.p,{children:"This document is useful for:"}),(0,r.jsxs)(n.p,{children:["-educational purposes",(0,r.jsx)(n.br,{}),"\n","-situations where the automated accessList fails and you need to specifiy the accessList directly"]})]}),"\n",(0,r.jsx)(n.h2,{id:"what-are-solidity-interfaces",children:"What are Solidity interfaces?"}),"\n",(0,r.jsx)(n.p,{children:"Solidity interfaces allow smart contracts to interact with each other."}),"\n",(0,r.jsx)(n.h2,{id:"why-are-solidity-interfaces-useful",children:"Why are Solidity interfaces useful?"}),"\n",(0,r.jsx)(n.p,{children:"Solidity interfaces can:"}),"\n",(0,r.jsx)(n.p,{children:"-call contracts with different Solidity versions"}),"\n",(0,r.jsx)(n.p,{children:"-use functions that are only needed for their use case"}),"\n",(0,r.jsx)(n.h2,{id:"how-do-i-define-a-solidity-interface",children:"How do I define a Solidity interface?"}),"\n",(0,r.jsx)(n.p,{children:"The contract interface is defined above the contract that will be calling the contract interface.\nFunctions are then defined inside the interface based on name, inputs and modifiers."}),"\n",(0,r.jsx)(n.h2,{id:"where-are-solidity-interface-functions-defined",children:"Where are Solidity interface functions defined?"}),"\n",(0,r.jsx)(n.p,{children:"A contract interface instance needs to be created in the contract that will be using the interface.\nThe contract interface is then defined when its address is set inside the constructor for the contract using the interface."}),"\n",(0,r.jsx)(n.h2,{id:"when-should-i-use-a-solidity-interface",children:"When should I use a Solidity interface?"}),"\n",(0,r.jsx)(n.p,{children:"One popular contract that is useful with interfaces is WETH (Wrapped Ether).\nThis contract converts MSG.VALUE into an ERC-20 instance. On Shardeum, SHM Is MSG.VALUE.\nTherefore, WETH is WSHM on Shardeum. This contract has wrap and unwrap functions:"}),"\n",(0,r.jsx)(n.p,{children:"Deposit (Wrap): SHM => WSHM."}),"\n",(0,r.jsx)(n.p,{children:"Withdraw (Unwrap): WSHM => SHM."}),"\n",(0,r.jsx)(n.p,{children:"Using a WSHM interface, we can create a Solidity 0.8.0 contract which can interact with WSHM (Solidity 0.4.0)."}),"\n",(0,r.jsx)(n.h2,{id:"wshm-solidity-040",children:"WSHM Solidity 0.4.0"}),"\n",(0,r.jsx)(s.A,{children:(0,r.jsx)(l.A,{value:"solidity",label:"Solidity",default:!0,children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-solidity",children:'// SPDX-License-Identifier: MIT\npragma solidity ^0.4.18;\n\ncontract WSHM {\n    string public name     = "Wrapped SHM";\n    string public symbol   = "WSHM";\n    uint8  public decimals = 18;\n\n    event  Approval(address indexed src, address indexed guy, uint wad);\n    event  Transfer(address indexed src, address indexed dst, uint wad);\n    event  Deposit(address indexed dst, uint wad);\n    event  Withdrawal(address indexed src, uint wad);\n\n    mapping (address => uint)                       public  balanceOf;\n    mapping (address => mapping (address => uint))  public  allowance;\n\n    function() public payable {\n        deposit();\n    }\n    function deposit() public payable {\n        balanceOf[msg.sender] += msg.value;\n        Deposit(msg.sender, msg.value);\n    }\n    function withdraw(uint wad) public {\n        require(balanceOf[msg.sender] >= wad);\n        balanceOf[msg.sender] -= wad;\n        msg.sender.transfer(wad);\n        Withdrawal(msg.sender, wad);\n    }\n\n    function totalSupply() public view returns (uint) {\n        return this.balance;\n    }\n\n    function approve(address guy, uint wad) public returns (bool) {\n        allowance[msg.sender][guy] = wad;\n        Approval(msg.sender, guy, wad);\n        return true;\n    }\n\n    function transfer(address dst, uint wad) public returns (bool) {\n        return transferFrom(msg.sender, dst, wad);\n    }\n\n    function transferFrom(address src, address dst, uint wad)\n        public\n        returns (bool)\n    {\n        require(balanceOf[src] >= wad);\n\n        if (src != msg.sender && allowance[src][msg.sender] != uint(-1)) {\n            require(allowance[src][msg.sender] >= wad);\n            allowance[src][msg.sender] -= wad;\n        }\n\n        balanceOf[src] -= wad;\n        balanceOf[dst] += wad;\n\n        Transfer(src, dst, wad);\n\n        return true;\n    }\n}\n'})})})}),"\n",(0,r.jsx)(n.h2,{id:"wshm-interface-solidity-080-with-multicall-contract",children:"WSHM interface Solidity 0.8.0 With Multicall Contract"}),"\n",(0,r.jsx)(s.A,{children:(0,r.jsx)(l.A,{value:"solidity",label:"Solidity",default:!0,children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-solidity",children:"// SPDX-License-Identifier: MIT\npragma solidity 0.8.17;\n\ninterface interfaceWSHM {\n\n    function transfer(address dst, uint wad) external returns (bool);\n\n    function transferFrom(address src, address dst, uint wad) external returns (bool);\n\n    function withdraw(uint wad) external;\n\n    function deposit() external payable;\n\n}\n\ncontract multicallWSHM {\n\n    interfaceWSHM public WSHM;\n\n    receive() external payable {}\n\n    fallback() external payable {}\n\n    constructor() {\n        WSHM = interfaceWSHM(0xa80d5d2C8Cc0d06fBC1F1A89A05d76f86082C20e); // WSHM Liberty 2.0 address.\n    }\n\n    function multicallDeposit() public payable {\n        WSHM.deposit{value: msg.value}();\n        WSHM.transfer(msg.sender, msg.value);\n    }\n\n    function multicallWithdraw(uint256 amount) public {\n        WSHM.transferFrom(msg.sender,address(this),amount);\n        WSHM.withdraw(amount);\n        payable(msg.sender).transfer(address(this).balance);\n    }\n\n}\n"})})})})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(f,{...e})}):f(e)}},9365:(e,n,t)=>{t.d(n,{A:()=>s});t(6540);var a=t(8215);const r={tabItem:"tabItem_Ymn6"};var i=t(4848);function s(e){let{children:n,hidden:t,className:s}=e;return(0,i.jsx)("div",{role:"tabpanel",className:(0,a.A)(r.tabItem,s),hidden:t,children:n})}},1470:(e,n,t)=>{t.d(n,{A:()=>x});var a=t(6540),r=t(8215),i=t(3104),s=t(6347),l=t(205),c=t(7485),o=t(1682),d=t(679);function u(e){return a.Children.toArray(e).filter((e=>"\n"!==e)).map((e=>{if(!e||(0,a.isValidElement)(e)&&function(e){const{props:n}=e;return!!n&&"object"==typeof n&&"value"in n}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}function f(e){const{values:n,children:t}=e;return(0,a.useMemo)((()=>{const e=n??function(e){return u(e).map((e=>{let{props:{value:n,label:t,attributes:a,default:r}}=e;return{value:n,label:t,attributes:a,default:r}}))}(t);return function(e){const n=(0,o.XI)(e,((e,n)=>e.value===n.value));if(n.length>0)throw new Error(`Docusaurus error: Duplicate values "${n.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[n,t])}function h(e){let{value:n,tabValues:t}=e;return t.some((e=>e.value===n))}function p(e){let{queryString:n=!1,groupId:t}=e;const r=(0,s.W6)(),i=function(e){let{queryString:n=!1,groupId:t}=e;if("string"==typeof n)return n;if(!1===n)return null;if(!0===n&&!t)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return t??null}({queryString:n,groupId:t});return[(0,c.aZ)(i),(0,a.useCallback)((e=>{if(!i)return;const n=new URLSearchParams(r.location.search);n.set(i,e),r.replace({...r.location,search:n.toString()})}),[i,r])]}function m(e){const{defaultValue:n,queryString:t=!1,groupId:r}=e,i=f(e),[s,c]=(0,a.useState)((()=>function(e){let{defaultValue:n,tabValues:t}=e;if(0===t.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(n){if(!h({value:n,tabValues:t}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${n}" but none of its children has the corresponding value. Available values are: ${t.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return n}const a=t.find((e=>e.default))??t[0];if(!a)throw new Error("Unexpected error: 0 tabValues");return a.value}({defaultValue:n,tabValues:i}))),[o,u]=p({queryString:t,groupId:r}),[m,b]=function(e){let{groupId:n}=e;const t=function(e){return e?`docusaurus.tab.${e}`:null}(n),[r,i]=(0,d.Dv)(t);return[r,(0,a.useCallback)((e=>{t&&i.set(e)}),[t,i])]}({groupId:r}),y=(()=>{const e=o??m;return h({value:e,tabValues:i})?e:null})();(0,l.A)((()=>{y&&c(y)}),[y]);return{selectedValue:s,selectValue:(0,a.useCallback)((e=>{if(!h({value:e,tabValues:i}))throw new Error(`Can't select invalid tab value=${e}`);c(e),u(e),b(e)}),[u,b,i]),tabValues:i}}var b=t(2303);const y={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var w=t(4848);function v(e){let{className:n,block:t,selectedValue:a,selectValue:s,tabValues:l}=e;const c=[],{blockElementScrollPositionUntilNextRender:o}=(0,i.a_)(),d=e=>{const n=e.currentTarget,t=c.indexOf(n),r=l[t].value;r!==a&&(o(n),s(r))},u=e=>{let n=null;switch(e.key){case"Enter":d(e);break;case"ArrowRight":{const t=c.indexOf(e.currentTarget)+1;n=c[t]??c[0];break}case"ArrowLeft":{const t=c.indexOf(e.currentTarget)-1;n=c[t]??c[c.length-1];break}}n?.focus()};return(0,w.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,r.A)("tabs",{"tabs--block":t},n),children:l.map((e=>{let{value:n,label:t,attributes:i}=e;return(0,w.jsx)("li",{role:"tab",tabIndex:a===n?0:-1,"aria-selected":a===n,ref:e=>c.push(e),onKeyDown:u,onClick:d,...i,className:(0,r.A)("tabs__item",y.tabItem,i?.className,{"tabs__item--active":a===n}),children:t??n},n)}))})}function g(e){let{lazy:n,children:t,selectedValue:i}=e;const s=(Array.isArray(t)?t:[t]).filter(Boolean);if(n){const e=s.find((e=>e.props.value===i));return e?(0,a.cloneElement)(e,{className:(0,r.A)("margin-top--md",e.props.className)}):null}return(0,w.jsx)("div",{className:"margin-top--md",children:s.map(((e,n)=>(0,a.cloneElement)(e,{key:n,hidden:e.props.value!==i})))})}function S(e){const n=m(e);return(0,w.jsxs)("div",{className:(0,r.A)("tabs-container",y.tabList),children:[(0,w.jsx)(v,{...n,...e}),(0,w.jsx)(g,{...n,...e})]})}function x(e){const n=(0,b.A)();return(0,w.jsx)(S,{...e,children:u(e.children)},String(n))}},8453:(e,n,t)=>{t.d(n,{R:()=>s,x:()=>l});var a=t(6540);const r={},i=a.createContext(r);function s(e){const n=a.useContext(i);return a.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:s(e.components),a.createElement(i.Provider,{value:n},e.children)}}}]);